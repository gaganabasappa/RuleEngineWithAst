document.getElementById('createRuleBtn').addEventListener('click', createRule);
document.getElementById('combineRulesBtn').addEventListener('click', combineRules);
document.getElementById('evaluateRuleBtn').addEventListener('click', evaluateRule);

const apiBaseUrl = 'http://localhost:8080/api/rules'; // Update with your backend API URL

async function createRule() {
    const ruleString = document.getElementById('ruleInput').value;
    const response = await fetch(`${apiBaseUrl}/create`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(ruleString),
    });

    const result = await response.json();
    displayResult(result);
}

async function combineRules() {
    const rules = document.getElementById('combineRulesInput').value.split(',');
    const response = await fetch(`${apiBaseUrl}/combine`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(rules),
    });

    const result = await response.json();
    displayResult(result);
}

async function evaluateRule() {
    const rule = document.getElementById('evaluateRuleInput').value;
    const data = document.getElementById('evaluateDataInput').value;
    const response = await fetch(`${apiBaseUrl}/evaluate`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ rule, data }),
    });

    const result = await response.json();
    displayResult(result);
}

function displayResult(result) {
    const resultsElement = document.getElementById('results');
    resultsElement.textContent = JSON.stringify(result, null, 2);
}
